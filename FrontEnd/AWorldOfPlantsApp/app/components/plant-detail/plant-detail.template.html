<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header"><button ng-click="$ctrl.test()">Test</button>Details for: {{$ctrl.plantDetails.plantName}}</h1><div id="mqttStatus" class="alert alert-danger" role="alert">Disconnected from MQTT client</div>
    <input type="hidden" ng-model="$ctrl.status" status-directive>
  </div>
</div>

<div class="row" plant-detail-directive>
  <div class="col-lg-12">
    <div id="plantDetailsPanel" class="panel panel-green">
      <div class="panel-heading" style="background-color: {{$ctrl.plantDetails.colour}}">
        Plant Details
      </div>
      <div class="panel-body">
        <form role="form">
          <div class="form-group input-group">
            <span class="input-group-addon">
              <i class="fa fa-info-circle"></i>
            </span>
            <input ng-model="$ctrl.plantDetails.plantId" type="text" class="form-control" disabled>
          </div>
          <div class="form-group input-group">
            <span class="input-group-addon">
              <i class="fa fa-file"></i>
            </span>
            <input ng-model="$ctrl.plantDetails.plantType" type="text" class="form-control">
          </div>
          <div class="form-group input-group">
            <span class="input-group-addon">
              <i class="fa fa-leaf"></i>
            </span>
            <input ng-model="$ctrl.plantDetails.plantName" type="text" class="form-control">
          </div>
          <div class="form-group input-group">
            <span class="input-group-addon">
              <i class="fa fa-calendar"></i>
            </span>
            <input ng-model="$ctrl.plantDetails.plantAge" type="text" class="form-control" disabled>
          </div>
          <div class="form-group">
            <input id="plantDelete" class="btn btn-danger pull-left" type="button" value="Delete">
          </div>
          <div class="form-group">
            <input id="plantUpdate" style="background-color: {{$ctrl.plantDetails.colour}}" class="btn btn-success pull-right" type="button" value="Update">
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-6">
    <canvas id="live-chart" plant-detail-canvas-directive></canvas>
    <!--<script>
      var canvas = document.getElementById('live-chart');
      var ctx = canvas.getContext('2d');
      var startingData = {
        labels: ["test", "test", "test", "test", "test", "test", "test"],
        datasets: [
          {
            label: "Temperature",
            fill: false,
            lineTension: 0.1,
            backgroundColor: "rgba(75,192,192,0.4)",
            borderColor: "rgba(75,192,192,1)",
            borderCapStyle: 'butt',
            borderDash: [],
            borderDashOffset: 0.0,
            borderJoinStyle: 'miter',
            pointBorderColor: "rgba(75,192,192,1)",
            pointBackgroundColor: "#fff",
            pointBorderWidth: 1,
            pointHoverRadius: 5,
            pointHoverBackgroundColor: "rgba(75,192,192,1)",
            pointHoverBorderColor: "rgba(220,220,220,1)",
            pointHoverBorderWidth: 2,
            pointRadius: 1,
            pointHitRadius: 10,
            data: [65, 59, 80, 81, 56, 55, 40],
            spanGaps: false
          }
        ]
      };
      var latestLabel = startingData.labels[6];

      var liveChart = new Chart(ctx, {
        type: "line",
        data: startingData
      });

      function moveChart(chart, newData) {
        chart.data.labels.push('test'); // add new label at end
        chart.data.labels.splice(0, 1); // remove first label

        chart.data.datasets.forEach(function(dataset, index) {
          dataset.data.push(newData[index]); // add new data at end
          dataset.data.splice(0, 1); // remove first data point
        });

        chart.update(1000);
      }



      // Test chart animation
      /*setInterval(function () {
        moveChart(liveChart, [Math.random() * 100, Math.random() * 100]);
      }, 1000);*/
    </script>-->
  </div>
</div>